/* –û–±–ª–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç—É */
.content-area {
    flex-grow: 1; 
    padding: 20px;
    overflow-x: auto; /* –î–æ–∑–≤–æ–ª—è—î –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É –ø—Ä–æ–∫—Ä—É—Ç–∫—É, —è–∫—â–æ —Ç–∞–±–ª–∏—Ü—è –∑–∞–Ω–∞–¥—Ç–æ —à–∏—Ä–æ–∫–∞ */
}

.proatlet-container {
    max-width: 100%; /* –ó–∞–π–º–∞—î –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É —à–∏—Ä–∏–Ω—É content-area */
    margin: 0 auto;
    padding: 0;
}

h2 {
    color: #FFD700; 
    border-bottom: 2px solid #3A3A3A;
    padding-bottom: 10px;
    margin-bottom: 20px;
}

/* ========================================= */
/* 2. –°–¢–ò–õ–Ü –¢–ê–ë–õ–ò–¶–Ü –ú–Ü–ö–†–û–¶–ò–ö–õ–£ (–ö–û–ú–ü–ê–ö–¢–ù–Ü–°–¢–¨) */
/* ========================================= */
.microcycle-table {
    width: 100%; 
    border-collapse: collapse;
    table-layout: fixed; /* –§—ñ–∫—Å—É—î–º–æ —à–∏—Ä–∏–Ω—É –¥–ª—è —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–æ–≥–æ —Ä–æ–∑–ø–æ–¥—ñ–ª—É */
    margin-bottom: 30px;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.1); 
}

.microcycle-table th,
.microcycle-table td {
    width: calc(100% / 7); /* –ö–æ–∂–Ω–∞ –∫–ª—ñ—Ç–∏–Ω–∫–∞ –∑–∞–π–º–∞—î 1/7 */
    padding: 8px 5px; /* –ó–º–µ–Ω—à–µ–Ω—ñ –≤—ñ–¥—Å—Ç—É–ø–∏ */
    border: 1px solid #333333;
    text-align: center;
}

.microcycle-table thead th {
    background-color: #2A2A2A; 
    color: #FFD700; 
    font-size: 0.9em; /* –ö–æ–º–ø–∞–∫—Ç–Ω–∏–π —à—Ä–∏—Ñ—Ç */
}
.microcycle-table tbody td {
    background-color: #222222;
}

/* –†—è–¥–æ–∫ MD+X */
#md-colors-row .cycle-day {
    padding: 10px 5px; 
    font-weight: bold;
}

.md-status {
    display: block;
    padding: 4px;
    border-radius: 4px;
    color: #1A1A1A !important; /* –ß–æ—Ä–Ω–∏–π —Ç–µ–∫—Å—Ç –Ω–∞ –∫–æ–ª—å–æ—Ä–æ–≤–æ–º—É —Ñ–æ–Ω—ñ */
}

/* –°–µ–ª–µ–∫—Ç–æ—Ä–∏ */
.activity-type-select {
    width: 100%;
    padding: 5px;
    font-size: 0.9em;
    border: 1px solid #444444; 
    background-color: #1A1A1A;
    color: #CCCCCC;
    border-radius: 4px;
}
.activity-type-select option { color: #CCCCCC; background-color: #1A1A1A; }


/* ========================================= */
/* 3. –ö–û–õ–¨–û–†–ò –°–¢–ê–¢–£–°–Ü–í (MD+X) */
/* ========================================= */
.color-red { background-color: #D9534F; color: white !important; } /* MD */
.color-dark-green { background-color: #1E8449; color: white !important; } /* MD+1 (—Ç–µ–º–Ω–æ-–∑–µ–ª–µ–Ω–∏–π) */
.color-green { background-color: #4CAF50; color: white !important; } /* MD+2 (–∑–µ–ª–µ–Ω–∏–π) */
.color-yellow { background-color: #FFC107; color: black !important; } /* MD-1 (–∂–æ–≤—Ç–∏–π) */
.color-deep-green { background-color: #008080; color: white !important; } /* MD-2 */
.color-orange { background-color: #FF9800; color: white !important; } /* MD-3 */
.color-blue { background-color: #007bff; color: white !important; } /* MD-4 */
.color-neutral { background-color: #2A2A2A; color: #CCCCCC !important; } /* REST */


/* ========================================= */
/* 4. –°–¢–ò–õ–Ü –§–û–†–ú –¢–ê –ö–ù–û–ü–û–ö */
/* ========================================= */
/* (–ó–∞–ª–∏—à—Ç–µ, —è–∫ –±—É–ª–æ, –¥–ª—è —á–æ—Ä–Ω–æ-–∑–æ–ª–æ—Ç–æ–≥–æ —Å—Ç–∏–ª—é) */

input[type="text"], input[type="number"], select {
    /* ... —Å—Ç–∏–ª—ñ —Ñ–æ—Ä–º ... */
    border: 1px solid #FFD700; 
    background-color: #1A1A1A;
    color: #FFD700;
}
.save-button {
    background-color: #FFD700; 
    color: #1A1A1A;
}
3. üß† weekly_plan_logic.js (–õ–æ–≥—ñ–∫–∞ MD+X/MD-X)
–¶–µ–π —Ñ–∞–π–ª –º—ñ—Å—Ç–∏—Ç—å –≤—Å—é —Å–∫–ª–∞–¥–Ω—É –ª–æ–≥—ñ–∫—É –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –º—ñ–∫—Ä–æ—Ü–∏–∫–ª—É —Ç–∞ —Ñ–∞—Ä–±—É–≤–∞–Ω–Ω—è.

JavaScript

// =========================================================
// weekly_plan_logic.js - –õ–û–ì–Ü–ö–ê –ö–ê–õ–ï–ù–î–ê–†–Ø –ú–Ü–ö–†–û–¶–ò–ö–õ–£
// =========================================================

// –ú–ê–ü–ê –ö–û–õ–¨–û–†–Ü–í –¢–ê –°–¢–ê–¢–£–°–Ü–í MD+X / MD-X
const COLOR_MAP = {
    'MD': { status: 'MD', colorClass: 'color-red' },
    'MD+1': { status: 'MD+1', colorClass: 'color-dark-green' }, 
    'MD+2': { status: 'MD+2', colorClass: 'color-green' }, 
    'MD+3': { status: 'MD+3', colorClass: 'color-neutral' }, // –í–∏—Ö–æ–¥–∏—Ç—å –∑–∞ –º–µ–∂—ñ —Ü–∏–∫–ª—É 7 –¥–Ω—ñ–≤
    
    'MD-1': { status: 'MD-1', colorClass: 'color-yellow' }, 
    'MD-2': { status: 'MD-2', colorClass: 'color-deep-green' }, 
    'MD-3': { status: 'MD-3', colorClass: 'color-orange' }, 
    'MD-4': { status: 'MD-4', colorClass: 'color-blue' }, 
    'REST': { status: 'REST', colorClass: 'color-neutral' }, 
};

document.addEventListener('DOMContentLoaded', () => {
    const activitySelects = document.querySelectorAll('.activity-type-select');
    const dynamicMatchFields = document.getElementById('dynamic-match-fields');
    const dayCells = document.querySelectorAll('#md-colors-row .cycle-day');

    // === 1. –û–ë–†–û–ë–ù–ò–ö–ò –ü–û–î–Ü–ô ===

    activitySelects.forEach(select => {
        select.addEventListener('change', (event) => {
            const dayIndex = event.target.closest('td').dataset.dayIndex;
            
            updateCycleColors(); // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü–∏–∫–ª—É
            updateMatchDetails(dayIndex, event.target.value); // –î–∏–Ω–∞–º—ñ—á–Ω–µ –ø–æ–ª–µ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –º–∞—Ç—á—É
        });
    });

    // === 2. –§–£–ù–ö–¶–Ü–Ø –î–õ–Ø –î–ï–¢–ê–õ–ï–ô –ú–ê–¢–ß–£ ===
    
    function updateMatchDetails(dayIndex, activityType) {
        const existingBlock = dynamicMatchFields.querySelector(`.match-detail-block[data-day-index="${dayIndex}"]`);
        
        // –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–∑–≤–∏ –¥–Ω—è –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞
        const dayName = dayCells[dayIndex].querySelector('.md-status').textContent.split(' ')[0]; 

        if (activityType === 'MATCH' && !existingBlock) {
            const detailsHTML = `
                <div class="match-detail-block" data-day-index="${dayIndex}">
                    <h4>–î–µ–Ω—å ${dayIndex * 1 + 1}: ${dayName} (–ú–∞—Ç—á)</h4>
                    <label>–°—É–ø–µ—Ä–Ω–∏–∫:</label>
                    <input type="text" name="opponent_${dayIndex}" required>
                    <label>–ú—ñ—Å—Ü–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—è:</label>
                    <select name="venue_${dayIndex}">
                        <option value="Home">–í–¥–æ–º–∞</option>
                        <option value="Away">–ù–∞ –≤–∏—ó–∑–¥—ñ</option>
                    </select>
                    <label>–í—ñ–¥—Å—Ç–∞–Ω—å –ø–æ—ó–∑–¥–∫–∏ (–∫–º):</label>
                    <input type="number" name="travel_km_${dayIndex}" value="0" min="0">
                </div>
            `;
            // –î–æ–¥–∞—î–º–æ –Ω–æ–≤–∏–π –±–ª–æ–∫ –¥–µ—Ç–∞–ª–µ–π
            dynamicMatchFields.insertAdjacentHTML('beforeend', detailsHTML);
            
        } else if (activityType !== 'MATCH' && existingBlock) {
            // –í–∏–¥–∞–ª—è—î–º–æ, —è–∫—â–æ –¥–µ–Ω—å –±—ñ–ª—å—à–µ –Ω–µ —î –º–∞—Ç—á–µ–º
            existingBlock.remove();
        }
    }


    // === 3. –û–°–ù–û–í–ù–ê –õ–û–ì–Ü–ö–ê –†–û–ó–†–ê–•–£–ù–ö–£ MD+X/MD-X —Ç–∞ –ö–û–õ–¨–û–†–Ü–í ===

    function updateCycleColors() {
        const matchDays = [];
        activitySelects.forEach((select, index) => {
            if (select.value === 'MATCH') {
                matchDays.push(index); 
            }
        });

        // 3.1. –Ü—Ç–µ—Ä—É—î–º–æ –ø–æ –∫–æ–∂–Ω–æ–º—É –¥–Ω—é
        dayCells.forEach((cell, index) => {
            const mdStatusElement = cell.querySelector('.md-status');
            let statusKey = 'REST'; 

            if (matchDays.includes(index)) {
                // –¶–µ –¥–µ–Ω—å –º–∞—Ç—á—É
                statusKey = 'MD';
            } else if (matchDays.length > 0) {
                // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –Ω–∞–π–±–ª–∏–∂—á–∏–π Match Day
                let minDistance = 7; 
                let isPostMatch = false; 

                matchDays.forEach(mdIndex => {
                    // –í—ñ–¥—Å—Ç–∞–Ω—å –≤ —Ü–∏–∫–ª—ñ: (–ü–æ—Ç–æ—á–Ω–∏–π –¥–µ–Ω—å - –î–µ–Ω—å –º–∞—Ç—á—É + 7) % 7
                    let distance = (index - mdIndex + 7) % 7; 

                    if (distance > 0) { 
                        if (distance <= 3) { // MD+1, MD+2, MD+3
                            if (distance < minDistance) {
                                minDistance = distance;
                                isPostMatch = true;
                            }
                        } else if (distance >= 4) { // MD-3, MD-2, MD-1
                            let daysToMatch = 7 - distance; 
                            if (daysToMatch < minDistance) {
                                minDistance = daysToMatch;
                                isPostMatch = false;
                            }
                        }
                    }
                });

                // –ü—Ä–∏–∑–Ω–∞—á–∞—î–º–æ —Å—Ç–∞—Ç—É—Å MD+X/MD-X
                if (minDistance <= 4) { // –û–±–º–µ–∂—É—î–º–æ —Ü–∏–∫–ª MD-4 –¥–æ MD+3
                    statusKey = isPostMatch ? `MD+${minDistance}` : `MD-${minDistance}`;
                }
            }

            // 3.2. –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è —Å—Ç–∏–ª—ñ–≤
            const style = COLOR_MAP[statusKey];
            mdStatusElement.textContent = style.status;
            
            // –í–∏–¥–∞–ª—è—î–º–æ –≤—Å—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –∫–ª–∞—Å–∏ –∫–æ–ª—å–æ—Ä—ñ–≤ —Ç–∞ –¥–æ–¥–∞—î–º–æ –Ω–æ–≤–∏–π
            Object.values(COLOR_MAP).forEach(map => cell.classList.remove(map.colorClass));
            cell.classList.add(style.colorClass);
            cell.title = `–§–∞–∑–∞: ${style.status}`; 
        });
    }

    // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –∑–∞–ø—É—Å–∫ –ª–æ–≥—ñ–∫–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
    updateCycleColors(); 
});
